function RGBtoHEX(d,c,a){return d<<16|c<<8|a}function animateResizeGame(k,c,l,d,e){var f=c*d;var h=l*d;var a=60;var g=1;var j=c-f;var i=l-h;var b=false;if(d>=1){b=true}if(b){j=c+f;i=l+h;$("canvas").animate({width:j+"px",height:i+"px",left:"-"+(f)+"px",top:"-"+(h)+"px"},1000).animate({width:c+"px",height:l+"px",left:"0px",top:"0px"},1000)}else{$("canvas").animate({width:j+"px",height:i+"px",left:(j)+"px",top:(i)+"px"},1000).animate({width:c+"px",height:l+"px",left:"0px",top:"0px"},1000)}}function randomNumberWithMax(b){var a=Math.floor(Math.random()*(b))+1;return a}function distractSize(a,b){(function(c){animateResizeGame(c,c.scale.width,c.scale.height,b,function(){})})(a)}function resetGameSizeWidth(a){if(a.device.desktop){return DESKTOP_GAME_WIDTH}else{return MOBILE_GAME_WIDTH}}function resetGameSizeHeight(a){if(a.device.desktop){return DESKTOP_GAME_HEIGHT}else{return MOBILE_GAME_HEIGHT}}(function(a){a.fn.pauseGame=function(c,b,d,e){if(b){c.scale.width=d;c.scale.height=e;c.scale.setSize()}else{c.scale.setMinMax(MIN_GAME_WIDTH,MIN_GAME_HEIGHT,resetGameSizeWidth(c),resetGameSizeHeight(c));c.scale.refresh()}return this}})(jQuery);var GAME_WIDTH=640;var GAME_HEIGHT=940;var MIN_GAME_WIDTH=320;var MIN_GAME_HEIGHT=470;var DESKTOP_GAME_WIDTH=420;var DESKTOP_GAME_HEIGHT=570;var MOBILE_GAME_WIDTH=640;var MOBILE_GAME_HEIGHT=940;CupGame={score:0,music:null,orientated:false};CupGame.Boot=function(a){};CupGame.Boot.prototype={init:function(){this.game.state.add("Preloader",CupGame.Preloader);this.game.state.add("MainMenu",CupGame.MainMenu);this.game.state.add("SecondMenu",CupGame.SecondMenu);this.game.state.add("Level1",CupGame.Level1);this.game.state.add("Level2",CupGame.Level2);this.game.state.add("Level3",CupGame.Level3);this.game.state.add("Level4",CupGame.Level4);this.game.state.add("Level5",CupGame.Level5);this.game.state.add("Level6",CupGame.Level6);this.game.state.add("Share",CupGame.Share);this.input.maxPointers=1;this.stage.disableVisibilityChange=true;if(this.game.device.desktop){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;this.scale.setMinMax(MIN_GAME_WIDTH,MIN_GAME_HEIGHT,DESKTOP_GAME_WIDTH,DESKTOP_GAME_HEIGHT);$("#game").addClass("desktop")}else{this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;this.scale.setMinMax(MIN_GAME_WIDTH,MIN_GAME_HEIGHT,MOBILE_GAME_WIDTH,MOBILE_GAME_HEIGHT);this.scale.forceOrientation(true,false);this.scale.setResizeCallback(this.gameResized,this);this.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this);this.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this);$("#game").addClass("mobile")}},preload:function(){this.load.image("preloaderBackground","images/preloader_background.jpg");this.load.image("preloaderBar","images/preloader_bar.png");this.load.image("default_bg","assets/backgrounds/default.png")},create:function(){this.state.start("Preloader")},gameResized:function(b,a){},enterIncorrectOrientation:function(){CupGame.orientated=false;document.getElementById("orientation").style.display="none"},leaveIncorrectOrientation:function(){CupGame.orientated=true;document.getElementById("orientation").style.display="block"}};CupGame.Cups=function(a){this.game=a;this.cup_1=null;this.cup_2=null;this.cup_3=null;this.cup_1_blur=null;this.cup_2_blur=null;this.cup_3_blur=null;this.ball=null;this.leftHand=null;this.rightHand=null;this.hasHands=null;this.hasFinishedSwapping=false;this.cupsArray=null;this.currentSwapIndex=-1;this.totalSwapsIndex=-1;this.totalSwaps=10;this.cupItemSwap_1=true;this.cupItemSwap_2=true;this.cupTapped=false;this.swapSpeed=800;this.ballPositionIndex=null;this.currentBallPosition=null;this.moveToNextLevel=false;this.moveToShareScene=false;this.hasBlurred=false;this.blurX=null;this.blurY=null;this.wizard=null};CupGame.Cups.prototype={create:function(a){this.totalSwapsIndex=0;var b=400;this.hasHands=a;this.cup_1=this.game.add.sprite((this.game.width*0.5)-150,(this.game.height-b),"cup_game","cup.png");this.cup_1.anchor.set(0.5);this.cup_2=this.game.add.sprite((this.game.width*0.5),(this.game.height-(b-50)),"cup_game","cup.png");this.cup_2.anchor.set(0.5);this.cup_3=this.game.add.sprite((this.game.width*0.5)+150,(this.game.height-b),"cup_game","cup.png");this.cup_3.anchor.set(0.5);this.cup_1_blur=this.game.add.sprite(this.cup_1.x,this.cup_1.y,"cup_game","cup.png");this.cup_1_blur.anchor.set(0.5);this.cup_2_blur=this.game.add.sprite(this.cup_2.x,this.cup_2.y,"cup_game","cup.png");this.cup_2_blur.anchor.set(0.5);this.cup_3_blur=this.game.add.sprite(this.cup_3.x,this.cup_3.y,"cup_game","cup.png");this.cup_3_blur.anchor.set(0.5);this.cup_1_blur.alpha=0;this.cup_2_blur.alpha=0;this.cup_3_blur.alpha=0;this.blurX=this.game.add.filter("BlurX");this.blurY=this.game.add.filter("BlurY");if(a){leftHand=this.game.add.sprite(this.game.width/2-185,this.game.height-((719/2)+100),"cup_game","leftHand.png");leftHand.anchor.set(0.5);leftHand.angle=3;rightHand=this.game.add.sprite(this.game.width/2+185,this.game.height-((719/2)+100),"cup_game","rightHand.png");rightHand.anchor.set(0.5);rightHand.angle=-3;leftHand.bringToTop();rightHand.bringToTop();this.cup_1.events.onInputDown.add(this.left_cup_tapped,this);this.cup_2.events.onInputDown.add(this.middle_cup_tapped,this);this.cup_3.events.onInputDown.add(this.right_cup_tapped,this);this.enableInput(true)}},enableInput:function(a){this.cup_1.inputEnabled=a;this.cup_2.inputEnabled=a;this.cup_3.inputEnabled=a},setWizard:function(a){this.wizard=a},createBall:function(){ball=new CupGame.Ball(this.game);ball.create(this.hasHands);if(this.hasHands){this.ballPositionIndex=1;this.currentBallPosition=1;this.bringToTop();leftHand.bringToTop();rightHand.bringToTop()}},enableDoubleVision:function(a){if(a){this.moveOut(this.cup_1_blur);this.moveOut(this.cup_2_blur);this.moveOut(this.cup_3_blur)}else{this.moveBack(this.cup_1_blur,function(){});this.moveBack(this.cup_2_blur,function(){});this.moveBack(this.cup_3_blur,function(){})}},update:function(a){if(this.currentSwapIndex!=-1){if(this.currentSwapIndex<=(this.totalSwaps*2)&&this.swapFinished()){this.doSwap(function(){this.currentSwapIndex++;if(this.totalSwapsIndex==this.totalSwaps){leftHand.bringToTop();rightHand.bringToTop();this.moveHandsIn(leftHand,rightHand,function(){leftHand.bringToTop();rightHand.bringToTop();this.hasFinishedSwapping=true})}});this.totalSwapsIndex++}}},bringToTop:function(){this.cup_1.bringToTop();this.cup_2.bringToTop();this.cup_3.bringToTop();leftHand.bringToTop();rightHand.bringToTop()},setAlpha:function(a){leftHand.alpha=a;rightHand.alpha=a;this.cup_1.alpha=a;this.cup_2.alpha=a;this.cup_3.alpha=a},destroy:function(){ball.destroy();this.cup_1.destroy();this.cup_2.destroy();this.cup_3.destroy();if(this.cup_1_blur){this.cup_1_blur.destroy()}if(this.cup_2_blur){this.cup_2_blur.destroy()}if(this.cup_3_blur){this.cup_3_blur.destroy()}if(this.hasHands){leftHand.destroy();rightHand.destroy()}if(this.blurX!=null){this.blurX.destroy()}if(this.blurY!=null){this.blurY.destroy()}},toggleCup:function(b,a){this.cupMoveUpDownToggle(b,a)},toggleCup1:function(a){this.cupMoveUpDownToggle(this.cup_1,a)},toggleCup2:function(a){this.cupMoveUpDownToggle(this.cup_2,a)},toggleCup3:function(a){this.cupMoveUpDownToggle(this.cup_3,a)},cupMoveUpDownToggle:function(d,a){var c=1000;var b=this.game.add.tween(d);if(d.y===540){b.to({y:"-100"},c,Phaser.Easing.Quadratic.InOut,true)}else{if(d.y===440){b.to({y:"+100"},c,Phaser.Easing.Quadratic.OutIn,true)}}if(d.y===590){b.to({y:"-100"},c,Phaser.Easing.Quadratic.InOut,true)}else{if(d.y===490){b.to({y:"+100"},c,Phaser.Easing.Quadratic.OutIn,true)}}if(a){b.onComplete.add(a,this)}b.start()},randomInt:function(b){var a=Math.floor(Math.random()*(b))+1;return a},doSwap:function(c){var a=this.randomInt(2);var b=this.randomInt(2);if(a===2){if(b===2){this.cupSwap(this.swapSpeed,this.cup_1,this.cup_3,this.cup_2,c);ball.moveToPosition(this.cup_3.x,this.cup_3.y);this.animateHandSwap(leftHand,rightHand)}else{this.cupSwap(this.swapSpeed,this.cup_1,this.cup_2,this.cup_3,c);ball.moveToPosition(this.cup_2.x,this.cup_2.y);this.animateHandSwap(leftHand,rightHand)}}else{this.cupSwap(this.swapSpeed,this.cup_2,this.cup_3,this.cup_1,c);this.animateHandSwap(leftHand,rightHand)}},cupSwap:function(f,h,g,e,a){this.cupItemSwap_1=false;var c=590;var d=this.game.add.tween(h);d.onStart.add(function(){if(g.y===540){e.bringToTop()}},this);d.to({x:g.x,y:g.y},f,Phaser.Easing.Quadratic.InOut,true);if(a){d.onComplete.add(a,this)}d.onComplete.add(function(){this.cupItemSwap_1=true},this);this.cupItemSwap_2=false;var b=this.game.add.tween(g);b.onStart.add(function(){if(h.y===540){e.bringToTop()}},this);b.to({x:h.x,y:h.y},f,Phaser.Easing.Quadratic.InOut,true);if(a){b.onComplete.add(a,this)}b.onComplete.add(function(){this.cupItemSwap_2=true},this);d.start();b.start()},startUp:function(){this.toggleCup1();this.handMoveUpDownToggle(this.closestHand(1),function(){var a=this;setTimeout(function(){a.handMoveUpDownToggle(a.closestHand(1));a.toggleCup1(function(){a.beginGame()})},500)})},beginGame:function(){var a=this;ball.toggleHidden();this.moveHandsOut(leftHand,rightHand,function(){a.currentSwapIndex=1})},updateSwapSpeed:function(a){if(a>100){this.swapSpeed=a}else{this.swapSpeed=100}},handMoveUpDownToggle:function(d,a){var c=1000;var b=this.game.add.tween(d);if(d.y===480.5){b.to({y:"-100"},c,Phaser.Easing.Quadratic.InOut)}else{if(d.y===380.5){b.to({y:"+100"},c,Phaser.Easing.Quadratic.OutIn)}}if(a){b.onComplete.add(a,this)}b.start()},animateHandSwap:function(d,c){var b=this.game.add.tween(d);b.to({x:"-85px"},this.swapSpeed*0.25,Phaser.Easing.Quadratic.OutIn);b.yoyo(true,0);b.start();var a=this.game.add.tween(c);a.to({x:"+85px"},this.swapSpeed*0.25,Phaser.Easing.Quadratic.OutIn);a.yoyo(true,0);a.start()},moveHandsOut:function(e,d,a){var c=this.game.add.tween(e);c.to({x:"-45px",y:"-25px"},this.swapSpeed,Phaser.Easing.Quadratic.OutIn);c.start();var b=this.game.add.tween(d);b.to({x:"+45px",y:"-25px"},this.swapSpeed,Phaser.Easing.Quadratic.OutIn);if(a){b.onComplete.add(a,this)}b.start()},moveHandsIn:function(e,d,a){var c=this.game.add.tween(e);c.to({x:"+45px",y:"+25px"},this.swapSpeed,Phaser.Easing.Quadratic.OutIn);c.start();var b=this.game.add.tween(d);b.to({x:"-45px",y:"+25px"},this.swapSpeed,Phaser.Easing.Quadratic.OutIn);if(a){b.onComplete.add(a,this)}b.start()},rotateHandToggle:function(d,a){var c=500;var b=this.game.add.tween(d);if(d.angle===3){b.to({angle:"+90",x:"+35",y:"-20"},c,Phaser.Easing.Quadratic.InOut)}else{if(d.angle===93){b.to({angle:"-90",x:"-35",y:"+20"},c,Phaser.Easing.Quadratic.OutIn)}else{if(d.angle===-3){b.to({angle:"-90",x:"-35",y:"-20"},c,Phaser.Easing.Quadratic.InOut)}else{if(d.angle===-93){b.to({angle:"+90",x:"+35",y:"+20"},c,Phaser.Easing.Quadratic.OutIn)}}}}if(a){b.onComplete.add(a,this)}b.start()},handMoveToCup:function(e,b,a){var d=500;var c=this.game.add.tween(e);if(e.angle===3||e.angle===-3){c.to({x:b.x-(e.width/2),y:(b.y-(e.height/2))},d,Phaser.Easing.Quadratic.InOut)}else{if(e.angle===93||e.angle===-93){c.to({x:b.x,y:(b.y-(e.height/2))},d,Phaser.Easing.Quadratic.InOut)}}if(a){c.onComplete.add(a,this)}c.start()},swapFinished:function(){if(this.cupItemSwap_1&&this.cupItemSwap_2){return true}else{return false}},hasTappedCup:function(){return this.cupTapped},cupPosition:function(a){if(a.y<589){if(a.x==170){return 1}else{return 3}}else{return 2}},closestHand:function(a){var b=0;if(a===1){b=this.cup_1.x}else{if(a===2){b=this.cup_2.x}else{b=this.cup_3.x}}if(b<=170){return leftHand}else{if(b>=320){return rightHand}else{return rightHand}}},left_cup_tapped:function(a){if(this.totalSwapsIndex==this.totalSwaps&&!this.hasTappedCup()&&this.hasFinishedSwapping&&!this.hasBlurred){this.bringToTop();ball.showBall();this.cupTapped=true;this.enableInput(false);var b=this.cupPosition(this.cup_1);if(b===2){this.wizard.toggleEyes();(function(c){c.toggleCup1();setTimeout(function(){c.toggleCup1(function(){c.check_correct_cup(1)})},1500)})(this)}else{(function(c){c.toggleCup1();c.handMoveUpDownToggle(c.closestHand(1),function(){setTimeout(function(){c.toggleCup1();c.handMoveUpDownToggle(c.closestHand(1),function(){c.check_correct_cup(1)})},1500)})})(this)}}},middle_cup_tapped:function(){if(this.totalSwapsIndex==this.totalSwaps&&!this.hasTappedCup()&&this.hasFinishedSwapping&&!this.hasBlurred){this.bringToTop();ball.showBall();this.cupTapped=true;this.enableInput(false);var a=this.cupPosition(this.cup_2);if(a===2){this.wizard.toggleEyes();(function(b){b.toggleCup2();setTimeout(function(){b.toggleCup2(function(){b.check_correct_cup(2)})},1500)})(this)}else{(function(b){b.toggleCup2();b.handMoveUpDownToggle(b.closestHand(2),function(){setTimeout(function(){b.toggleCup2();b.handMoveUpDownToggle(b.closestHand(2),function(){b.check_correct_cup(2)})},1500)})})(this)}}},right_cup_tapped:function(){if(this.totalSwapsIndex==this.totalSwaps&&!this.hasTappedCup()&&this.hasFinishedSwapping&&!this.hasBlurred){this.bringToTop();ball.showBall();var a=this.cupPosition(this.cup_3);this.cupTapped=true;this.enableInput(false);if(a===2){this.wizard.toggleEyes();(function(b){b.toggleCup3();setTimeout(function(){b.toggleCup3(function(){b.check_correct_cup(3)})},1500)})(this)}else{(function(b){b.toggleCup3();b.handMoveUpDownToggle(b.closestHand(3),function(){setTimeout(function(){b.toggleCup3();b.handMoveUpDownToggle(b.closestHand(3),function(){b.check_correct_cup(3)})},1500)})})(this)}}},check_correct_cup:function(b){if(b===this.ballPositionIndex){this.moveToNextLevel=true}else{var a=this.cupPosition(this.cup_1);if(a===2){this.wizard.toggleEyes();(function(c){c.toggleCup1();setTimeout(function(){c.toggleCup1(function(){c.moveToShareScene=true})},1500)})(this)}else{(function(c){var d=c.cupPosition(c.cup_1);c.toggleCup1();c.handMoveUpDownToggle(c.closestHand(d),function(){setTimeout(function(){c.toggleCup1();c.handMoveUpDownToggle(c.closestHand(d),function(){c.moveToShareScene=true})},1500)})})(this)}}},blur:function(a){if(a){this.cup_1.alpha=0.9;this.cup_2.alpha=0.9;this.cup_3.alpha=0.9;this.cup_1_blur.alpha=0.9;this.cup_2_blur.alpha=0.9;this.cup_3_blur.alpha=0.9;this.hasBlurred=true;this.cup_1.filters=[this.blurX,this.blurY];this.cup_2.filters=[this.blurX,this.blurY];this.cup_3.filters=[this.blurX,this.blurY];this.cup_1_blur.filters=[this.blurX,this.blurY];this.cup_2_blur.filters=[this.blurX,this.blurY];this.cup_3_blur.filters=[this.blurX,this.blurY];leftHand.filters=[this.blurX,this.blurY];rightHand.filters=[this.blurX,this.blurY]}else{this.hasBlurred=false;this.cup_1.alpha=1;this.cup_2.alpha=1;this.cup_3.alpha=1;this.cup_1.filters=null;this.cup_2.filters=null;this.cup_3.filters=null;this.cup_1_blur.filters=null;this.cup_2_blur.filters=null;this.cup_3_blur.filters=null;leftHand.filters=null;rightHand.filters=null}this.enableDoubleVision(a)},scaleItems:function(a){if(a){this.growSpriteCup(this.cup_1);this.growSpriteCup(this.cup_2);this.growSpriteCup(this.cup_3);this.growSpriteCup(this.cup_1_blur);this.growSpriteCup(this.cup_2_blur);this.growSpriteCup(this.cup_3_blur)}else{this.shrinkSpriteCup(this.cup_1);this.shrinkSpriteCup(this.cup_2);this.shrinkSpriteCup(this.cup_3);this.shrinkSpriteCup(this.cup_1_blur);this.shrinkSpriteCup(this.cup_2_blur);this.shrinkSpriteCup(this.cup_3_blur)}},shrinkSpriteCup:function(c,a){var d=1000;var b=this.game.add.tween(c);b.to({width:"-50px",height:"-50px"},d,Phaser.Easing.Linear.None,true);b.yoyo(true,0);if(a){b.onComplete.add(a,this)}b.start()},growSpriteCup:function(c,a){var d=1000;var b=this.game.add.tween(c);b.to({width:"+50px",height:"+50px"},d,Phaser.Easing.Linear.None,true);b.yoyo(true,0);if(a){b.onComplete.add(a,this)}b.start()},moveBack:function(c,a){var d=1000;var b=this.game.add.tween(c);b.to({x:"-50px",alpha:0},d,Phaser.Easing.Linear.None,true);if(a){b.onComplete.add(a,this)}b.start()},moveOut:function(c,a){var d=1000;var b=this.game.add.tween(c);b.to({x:"+50px",alpha:1},d,Phaser.Easing.Linear.None,true);if(a){b.onComplete.add(a,this)}b.start()}};CupGame.Ball=function(a){this.game=a;this.sprite=null;this.toggleDisplay=false;this.cupHeight=400};CupGame.Ball.prototype={create:function(a){if(a){this.sprite=this.game.add.sprite((this.game.width*0.5)-150,(this.game.height-(this.cupHeight-50)),"cup_game","ball.png")}else{this.sprite=this.game.add.sprite((this.game.width*0.5)+120,(this.game.height-(this.cupHeight-80)),"cup_game","ball.png")}this.sprite.anchor.set(0.5)},update:function(){},showBall:function(){this.sprite.alpha=1;this.toggleDisplay=true},toggleHidden:function(){if(!this.toggleDisplay){this.sprite.alpha=0}else{this.sprite.alpha=1}this.toggleDisplay=!this.toggleDisplay},destroy:function(){this.sprite.destroy()},moveToPosition:function(b,a){this.sprite.x=b;this.sprite.y=(a+40)}};CupGame.Desk=function(a){this.game=a;this.sprite=null};CupGame.Desk.prototype={create:function(){this.sprite=this.game.add.sprite((this.game.width*0.5),(this.game.height-100),"cup_game","desk.png");this.sprite.anchor.set(0.5)},update:function(){},scaleItems:function(a){if(a){this.growSprite(this.sprite)}else{this.shrinkSprite(this.sprite)}},shrinkSprite:function(c,a){var d=1000;var b=this.game.add.tween(c);b.to({width:"-200px"},d,Phaser.Easing.Linear.None,true);b.yoyo(true,0);if(a){b.onComplete.add(a,this)}b.start()},growSprite:function(c,a){var d=1000;var b=this.game.add.tween(c);b.to({width:"+200px"},d,Phaser.Easing.Linear.None,true);b.yoyo(true,0);if(a){b.onComplete.add(a,this)}b.start()},destroy:function(){this.sprite.destroy()}};CupGame.Lights=function(a){this.game=a;this.lightState=false;this.lightFlashState=false;this.shineRightTween=null;this.shineLeftTween=null;this.hasFlashed=false};CupGame.Lights.prototype={create:function(){shineRight=this.game.add.sprite(-340,50,"cup_game","lightRightShine.png");shineRight.alpha=0;shineLeft=this.game.add.sprite(65,50,"cup_game","lightLeftShine.png");shineLeft.alpha=0;this.setWhiteLights();light_left=this.game.add.sprite((165/2)/2,0,"cup_game","lightLeft.png");light_left.anchor.set(0.5);light_right=this.game.add.sprite((this.game.width)-((165/2)/2),0,"cup_game","lightRight.png");light_right.anchor.set(0.5);light_left.inputEnabled=true;light_left.events.onInputDown.add(this.lights_tapped,this);light_right.inputEnabled=true;light_right.events.onInputDown.add(this.flash_lights_tapped,this)},setWhiteLights:function(){shineLeft.tint=RGBtoHEX(255,255,255);shineRight.tint=RGBtoHEX(255,255,255)},update:function(){},destroy:function(){shineRight.destroy();shineLeft.destroy();light_left.destroy();light_right.destroy()},switchLeftLight:function(a){if(a){shineLeft.alpha=0.2}else{shineLeft.alpha=0}},switchRightLight:function(a){if(a){shineRight.alpha=0.2}else{shineRight.alpha=0}},flashyLights:function(a){if(a){this.shineRightTween=this.colorSwitch(shineRight,RGBtoHEX(255,0,0),RGBtoHEX(69,220,121),500);this.shineLeftTween=this.colorSwitch(shineLeft,RGBtoHEX(69,220,121),RGBtoHEX(255,0,0),500)}else{if(this.shineRightTween!=null){this.shineRightTween.stop()}if(this.shineLeftTween!=null){this.shineLeftTween.stop()}}},colorSwitch:function(f,e,b,d){var c={step:0};var a=this.game.add.tween(c).to({step:5},d);a.onUpdateCallback(function(){f.tint=Phaser.Color.interpolateColor(e,b,2,c.step)});f.tint=e;a.repeatAll(5);a.onComplete.add(function(){this.turnLights(false);this.lightFlashState=false},this);a.start();return a},turnLights:function(a){this.switchLeftLight(a);this.switchRightLight(a);this.lightState=a},lights_tapped:function(){},flash_lights_tapped:function(){},toggleFlashLights:function(){if(!this.lightState){this.lights_tapped()}this.lightFlashState=!this.lightFlashState;this.flashyLights(this.lightFlashState);this.turnLights(this.lightFlashState)}};CupGame.ExitButton=function(a){this.game=a;this.aButton=null};CupGame.ExitButton.prototype={create:function(){aButton=this.game.add.sprite((this.game.width*0.8),(this.game.height-((113)/2)-30),"cup_game","exit.png");aButton.anchor.set(0.5);aButton.inputEnabled=true;aButton.events.onInputDown.add(this.exit_button_tapped,this);aButton.events.onInputUp.add(this.exit_button_upped,this)},update:function(){},exit_button_upped:function(){this.alpha=1},exit_button_tapped:function(a){alert("Exit Button Action - Not sure where this goes")},destroy:function(){aButton.destroy()}};CupGame.Wizard=function(a){this.game=a;this.body=null;this.desk=null;this.cups=null;this.blurX=null;this.blurY=null;this.hasBlurred=false;this.leftEye=false;this.rightEye=false;this.eyeDown=false};CupGame.Wizard.prototype={create:function(){this.body=this.game.add.sprite(this.game.width/2,this.game.height-(719/2),"cup_game","wizard.png");this.body.anchor.set(0.5);this.leftEye=this.game.add.sprite((this.game.width/2)-65,(this.game.height/2)+70,"cup_game","wizard_eye.png");this.leftEye.anchor.set(0.5);this.rightEye=this.game.add.sprite((this.game.width/2)+65,(this.game.height/2)+70,"cup_game","wizard_eye.png");this.rightEye.anchor.set(0.5);this.desk=new CupGame.Desk(this.game);this.desk.create();this.blurX=this.game.add.filter("BlurX");this.blurY=this.game.add.filter("BlurY")},update:function(){},destroy:function(){this.body.destroy();this.desk.destroy();this.rightEye.destroy();this.leftEye.destroy();if(this.blurX!=null){this.blurX.destroy()}if(this.blurY!=null){this.blurY.destroy()}},move:function(a){this.animateSprite(this.body,580.5,380.5);this.animateSprite(this.rightEye,540,385);this.animateSprite(this.leftEye,540,385,a)},startUp:function(){},animateEyesDown:function(b,a){this.animateEyeSprite(b,this.leftEye,false);this.animateEyeSprite(b,this.rightEye,false,a)},animateEyesUp:function(b,a){this.animateEyeSprite(b,this.leftEye,true);this.animateEyeSprite(b,this.rightEye,true,a)},toggleEyes:function(){(function(a){a.animateEyesUp(100,function(){a.animateEyesDown(1000,function(){setTimeout(function(){a.animateEyesUp(1000,function(){a.animateEyesDown(100)})},500)})})})(this)},animateEyeSprite:function(e,b,d,a){var c=this.game.add.tween(b);if(d){c.to({y:"+20"},e,Phaser.Easing.Quadratic.InOut,true)}else{c.to({y:"-20"},e,Phaser.Easing.Quadratic.OutIn,true)}if(a){c.onComplete.add(a,this)}c.start()},animateSprite:function(d,b,a,c){var f=1000;var e=this.game.add.tween(d);if(d.y===b){e.to({y:"-200"},f,Phaser.Easing.Quadratic.InOut,true)}else{if(d.y===a){e.to({y:"+200"},f,Phaser.Easing.Quadratic.OutIn,true)}}if(c){e.onComplete.add(c,this)}e.start()},wizard_tapped:function(){},blur:function(a){if(a){this.hasBlurred=true;this.body.filters=[this.blurX,this.blurY];this.desk.sprite.filters=[this.blurX,this.blurY];this.leftEye.filters=[this.blurX,this.blurY];this.rightEye.filters=[this.blurX,this.blurY]}else{this.hasBlurred=false;this.body.filters=null;this.desk.sprite.filters=null;this.leftEye.filters=null;this.rightEye.filters=null}},scaleItems:function(a){this.desk.scaleItems(a)}};CupGame.ScoreBoard=function(a){this.game=a;this.levelLabel=null;this.bloodLabel1=null;this.bloodLabel2=null;this.bloodLabel3=null;this.bloodySign=null};CupGame.ScoreBoard.prototype={create:function(){this.bloodySign=this.game.add.sprite(30,this.game.height-(127+20),"cup_game","blood.png");var b=CupGame.Style.defaultText("45px",this.game.width,"#FFFFFF");var a=CupGame.Style.defaultText("70px",this.game.width,"#FFFFFF");this.levelLabel=this.game.add.text(85,this.game.height-(127+85),"",b);this.bloodLabel1=this.game.add.text(65,this.game.height-(115),"",a);this.bloodLabel2=this.game.add.text(155,this.game.height-(115),"",a);this.bloodLabel3=this.game.add.text(220,this.game.height-(115),"",a)},update:function(){},destroy:function(){this.bloodySign.destroy();this.levelLabel.destroy();this.bloodLabel1.destroy();this.bloodLabel2.destroy();this.bloodLabel3.destroy()},updateLevel:function(a){this.levelLabel.text=a},updateBloodLevel:function(a,b){this.bloodLabel1.text="0";this.bloodLabel2.text=a;this.bloodLabel3.text=b}};CupGame.DistractionLabel=function(a){this.game=a};CupGame.DistractionLabel.prototype={create:function(){var a=CupGame.Style.defaultText("70px",this.game.width,"#FFFFFF");mainLabel=this.game.add.text((this.game.width/2),120,"",a);mainLabel.anchor.set(0.5);mainLabel.alpha=0},update:function(){},destroy:function(){mainLabel.destroy()},updateLabel:function(a){mainLabel.text=a},showLabel:function(){mainLabel.alpha=1}};CupGame.Cloud=function(a){this.game=a;this.sprite=null;this.isFullScreen=false};CupGame.Cloud.prototype={create:function(a){if(a){this.sprite=this.game.add.sprite((this.game.width*0.5),(this.game.height*0.5),"cup_game","cloud.png")}else{this.sprite=this.game.add.sprite((this.game.width*0.5),(this.game.height*0.5)-240,"cup_game","cloud.png")}this.sprite.anchor.set(0.5)},update:function(){},destroy:function(){this.sprite.destroy()},fullScreen:function(){this.sprite.width=(798*1.45);this.sprite.height=(828*1.45);this.isFullScreen=true},shrinkCloud:function(a){var c=1000;var b=this.game.add.tween(this.sprite);this.sprite.alpha=1;if(this.isFullScreen){b.to({width:"-798px",height:"-828px",alpha:0,x:this.game.width*0.5,y:this.game.height*0.5},c,Phaser.Easing.Linear.None,true)}else{b.to({width:"-798px",height:"-828px",alpha:0,x:this.game.width*0.5,y:this.game.height*0.5},c,Phaser.Easing.Linear.None,true)}if(a){b.onComplete.add(a,this)}b.start()},growCloud:function(a){var c=1000;var b=this.game.add.tween(this.sprite);this.sprite.alpha=0;b.to({width:"+798px",height:"+828px",alpha:1,x:this.game.width*0.5,y:this.game.height*0.5},c,Phaser.Easing.Linear.None,true);if(a){b.onComplete.add(a,this)}b.start()},fadeOut:function(a){var c=2000;var b=this.game.add.tween(this.sprite);b.to({alpha:0},c,Phaser.Easing.Quadratic.InOut);if(a){b.onComplete.add(a,this)}b.start()},bringToTop:function(){this.sprite.bringToTop()}};CupGame.InfoLabel=function(a){this.game=a};CupGame.InfoLabel.prototype={create:function(){var b=CupGame.Style.defaultText("40px",this.game.width,"#FFFFFF");var a=CupGame.Style.defaultText("30px",(this.game.width*0.75),"#FFFFFF");levelLabel=this.game.add.text((this.game.width/2),50,"",b);levelLabel.anchor.set(0.5);subLevelLabel=this.game.add.text((this.game.width/2),135,"",a);subLevelLabel.anchor.set(0.5)},update:function(){},destroy:function(){levelLabel.destroy();subLevelLabel.destroy()},updateLabel:function(a){levelLabel.text=a},updateSubLabel:function(a){subLevelLabel.text=a},fadeOut:function(a){var d=250;var b=this.game.add.tween(levelLabel);b.to({alpha:0},d,Phaser.Easing.Quadratic.InOut);b.start();var c=this.game.add.tween(subLevelLabel);c.to({alpha:0},d,Phaser.Easing.Quadratic.InOut);if(a){c.onComplete.add(a,this)}c.start()}};CupGame.InfoImage=function(a){this.game=a;this.sprite=null};CupGame.InfoImage.prototype={create:function(a){if(a<=6){this.sprite=this.game.add.sprite((this.game.width*0.5),(this.game.height*0.5),"level"+a)}else{this.sprite=this.game.add.sprite((this.game.width*0.5),(this.game.height*0.5),"levelx")}this.sprite.anchor.set(0.5)},update:function(){},destroy:function(){this.sprite.destroy()},fadeIn:function(a){var c=250;var b=this.game.add.tween(this.sprite);b.to({alpha:1},c,Phaser.Easing.Quadratic.InOut);if(a){b.onComplete.add(a,this)}b.start()},fadeOut:function(a){var c=150;var b=this.game.add.tween(this.sprite);b.to({alpha:0},c,Phaser.Easing.Quadratic.InOut);if(a){aTween2.onComplete.add(a,this)}b.start()}};CupGame.Style=function(a){this.defaultText};CupGame.Style.defaultText=function(b,a){return this.defaultText(b,a,"#46a8ef")};CupGame.Style.defaultText=function(d,c,a){var b={font:"",fontSize:d,fill:a,wordWrap:true,wordWrapWidth:c,align:"center"};return b};2;CupGame.Preloader=function(a){this.background=null;this.preloadBar=null;this.load_status=null;this.ready=false};CupGame.Preloader.prototype={preload:function(){this.background=this.add.sprite(0,0,"preloaderBackground");this.preloadBar=this.add.sprite(300,400,"preloaderBar");this.load.setPreloadSprite(this.preloadBar)},create:function(){this.preloadBar.cropEnabled=false;this.game.add.image(0,0,"default_bg");this.game.load.onFileComplete.add(this.loader_refresh,this);this.game.load.onLoadComplete.add(this.loader_next,this);var b=CupGame.Style.defaultText("30px",this.game.width*0.7,"#FFFFFF");var a=this.game.add.text((this.game.width*0.5),(this.game.height*0.5),"Please wait loading game data...",b);a.anchor.set(0.5);load_status=this.game.add.text((this.game.width*0.5),(this.game.height*0.5)+a.height,"Preloading data",b);load_status.anchor.set(0.5);this.loader_load();this.game.load.start()},update:function(){},cleanUp:function(){},loader_load:function(){this.game.load.atlasJSONHash("cup_game","assets/cup_game.png","assets/cup_game.json");this.game.load.script("filterX","src/filters/BlurX.js");this.game.load.script("filterY","src/filters/BlurY.js");this.game.load.image("level1","assets/text/level1.png");this.game.load.image("level2","assets/text/level2.png");this.game.load.image("level3","assets/text/level3.png");this.game.load.image("level4","assets/text/level4.png");this.game.load.image("level5","assets/text/level5.png");this.game.load.image("level6","assets/text/level6.png");this.game.load.image("levelx","assets/text/levelx.png");this.game.load.image("startBtn","assets/start_btn.png")},loader_refresh:function(b,e,d,c,a){load_status.setText("Loading... "+b+"%")},loader_next:function(){this.cleanUp();this.state.start("MainMenu")}};CupGame.MainMenu=function(a){this.playButton=null;this.message_text=null;this.load_text=null;this.desk=null;this.cups=null;this.tapped=false};CupGame.MainMenu.prototype={create:function(){this.game.add.image(0,0,"default_bg");this.cloud=this.game.add.sprite((this.game.width*0.5),(this.game.height/2)-240,"cup_game","cloud.png");this.cloud.anchor.set(0.5);var a=CupGame.Style.defaultText("60px",this.game.width*0.7,"#46a8ef");load_text=this.game.add.text((this.game.width*0.5),(this.game.height*0.25),"This will be the loosest cup & ball game you've ever played.",a);load_text.anchor.set(0.5);desk=new CupGame.Desk(this.game);desk.create();cups=new CupGame.Cups(this.game);cups.create();cups.createBall();playButton=this.game.add.sprite((this.game.width*0.5-130),(this.game.height-85),"cup_game","letsgo.png");playButton.anchor.set(0.5);playButton.inputEnabled=true;playButton.events.onInputDown.add(this.play_button_tapped,this);exitButton=new CupGame.ExitButton(this.game);exitButton.create();(function(b){b.game.input.keyboard.onDownCallback=function(c){if(c.keyCode==13||c.keyCode==32){b.play_button_tapped()}}})(this);this.tapped=false},update:function(){},cleanUp:function(){desk.destroy();cups.destroy();playButton.destroy()},startGame:function(a){},play_button_tapped:function(){if(!this.tapped){this.tapped=true;this.cleanUp();this.state.start("SecondMenu")}}};CupGame.SecondMenu=function(a){this.game;this.add;this.camera;this.cache;this.input;this.load;this.math;this.sound;this.stage;this.time;this.tweens;this.world;this.particles;this.physics;this.rnd;this.desk=null;this.playButton=null;this.cups=null;this.cloud=null;this.smoke=null;this.message_text=null;this.tapped=false;this.infoImage=null};CupGame.SecondMenu.prototype={create:function(){this.game.add.image(0,0,"default_bg");this.desk=new CupGame.Desk(this.game);this.desk.create();this.cloud=new CupGame.Cloud(this.game);this.cloud.create();this.playButton=this.game.add.sprite((this.game.width*0.5),(this.game.height-100),"startBtn");this.playButton.anchor.set(0.5);this.playButton.inputEnabled=true;this.playButton.events.onInputDown.add(this.play_button_tapped,this);this.cups=new CupGame.Cups(this.game);this.cups.create();this.cups.createBall();var a=CupGame.Style.defaultText("45px",(this.game.width*0.75),"#46a8ef");this.message_text=this.game.add.text((this.game.width*0.5),(this.game.height*0.25),"Watch what cup the ball goes under. Once the cups have stopped moving select the right cup.",a);this.message_text.anchor.set(0.5);this.smoke=new CupGame.Cloud(this.game);this.smoke.create(false);this.smoke.sprite.alpha=0;(function(b){b.game.input.keyboard.onDownCallback=function(c){if(c.keyCode==13||c.keyCode==32){b.play_button_tapped()}}})(this);this.tapped=false},update:function(){},cleanUp:function(){this.desk.destroy();this.playButton.destroy();this.cups.destroy();this.message_text.destroy();this.cloud.destroy();this.smoke.destroy()},play_button_tapped:function(){if(!this.tapped){this.tapped=true;(function(a){a.smoke.growCloud(function(){a.state.start("Level1")})})(this)}},quitGame:function(a){this.cleanUp();this.state.start("SecondMenu")}};CupGame.Level1=function(a){this.game;this.add;this.camera;this.cache;this.input;this.load;this.math;this.sound;this.stage;this.time;this.tweens;this.world;this.particles;this.physics;this.rnd;this.desk=null;this.lights=null;this.exitButton=null;this.wizard=null;this.cups=null;this.scoreBoard=null;this.smoke=null;this.background=null;this.hasResizedDistaction=false};CupGame.Level1.prototype={create:function(){this.game.stage.backgroundColor="#FFFFFF";this.background=this.game.add.image(0,0,"default_bg");lights=new CupGame.Lights(this.game);lights.create();wizard=new CupGame.Wizard(this.game);wizard.create();cups=new CupGame.Cups(this.game);cups.create(true);cups.updateSwapSpeed(700);cups.createBall();cups.setWizard(wizard);exitButton=new CupGame.ExitButton(this.game);exitButton.create();scoreBoard=new CupGame.ScoreBoard(this.game);scoreBoard.create();scoreBoard.bloodySign.inputEnabled=true;scoreBoard.bloodySign.events.onInputDown.add(this.scoreBoard_tapped,this);scoreBoard.updateLevel("Level 1");scoreBoard.updateBloodLevel("0","0");distractionLabel=new CupGame.DistractionLabel(this.game);distractionLabel.create();distractionLabel.updateLabel("BALLS!");this.smoke=new CupGame.Cloud(this.game);this.smoke.create(true);this.smoke.sprite.alpha=1;this.smoke.fullScreen();infoImage=new CupGame.InfoImage(this.game);infoImage.create(1);infoImage.sprite.alpha=0;infoImage.fadeIn();var a=3500;(function(b){setTimeout(function(){infoImage.fadeOut();b.smoke.shrinkCloud()},a)})(this);(function(b){setTimeout(function(){wizard.move(function(){cups.startUp()})},a*1.5)})(this);this.state.states.Share.setLevel(1);this.randomSwap=randomNumberWithMax(cups.totalSwaps)},update:function(){cups.update();if(cups.moveToNextLevel){cups.moveToNextLevel=false;(function(a){setTimeout(function(){a.nextLevel()},500)})(this)}if(cups.moveToShareScene){cups.moveToShareScene=false;(function(a){setTimeout(function(){a.shareScene()},500)})(this)}},cleanUp:function(){lights.destroy();wizard.destroy();cups.destroy();scoreBoard.destroy();exitButton.destroy();infoImage.destroy();distractionLabel.destroy();this.smoke.destroy();this.background.destroy()},quitGame:function(a){this.cleanUp();this.state.start("MainMenu")},scoreBoard_tapped:function(a){},showDistraction:function(){},nextLevel:function(){(function(a){a.smoke.bringToTop();a.smoke.growCloud(function(){a.cleanUp();a.state.start("Level2")})})(this)},shareScene:function(){this.smoke.bringToTop();this.smoke.growCloud();this.cleanUp();this.state.start("Share")}};CupGame.Level2=function(a){this.game;this.add;this.camera;this.cache;this.input;this.load;this.math;this.sound;this.stage;this.time;this.tweens;this.world;this.particles;this.physics;this.rnd;this.desk=null;this.lights=null;this.exitButton=null;this.wizard=null;this.cups=null;this.scoreBoard=null;this.infoLabel=null;this.smoke=null;this.background=null};CupGame.Level2.prototype={create:function(){this.game.stage.backgroundColor="#FFFFFF";this.background=this.game.add.image(0,0,"default_bg");lights=new CupGame.Lights(this.game);lights.create();wizard=new CupGame.Wizard(this.game);wizard.create();cups=new CupGame.Cups(this.game);cups.create(true);cups.updateSwapSpeed(350);cups.createBall();cups.setWizard(wizard);exitButton=new CupGame.ExitButton(this.game);exitButton.create();scoreBoard=new CupGame.ScoreBoard(this.game);scoreBoard.create();scoreBoard.bloodySign.inputEnabled=true;scoreBoard.bloodySign.events.onInputDown.add(this.scoreBoard_tapped,this);scoreBoard.updateLevel("Level 2");scoreBoard.updateBloodLevel("0","5");distractionLabel=new CupGame.DistractionLabel(this.game);distractionLabel.create();distractionLabel.updateLabel("Paying attention?");this.smoke=new CupGame.Cloud(this.game);this.smoke.create(true);this.smoke.sprite.alpha=1;this.smoke.fullScreen();infoImage=new CupGame.InfoImage(this.game);infoImage.create(2);infoImage.sprite.alpha=0;infoImage.fadeIn();var a=3500;(function(b){setTimeout(function(){infoImage.fadeOut();b.smoke.shrinkCloud()},a)})(this);(function(b){setTimeout(function(){wizard.move(function(){cups.startUp()})},a*1.5)})(this);this.state.states.Share.setLevel(2)},showDistraction:function(){distractionLabel.showLabel()},update:function(){cups.update();if(cups.moveToNextLevel){cups.moveToNextLevel=false;(function(a){setTimeout(function(){a.nextLevel()},500)})(this)}if(cups.moveToShareScene){cups.moveToShareScene=false;(function(a){setTimeout(function(){a.shareScene()},500)})(this)}},cleanUp:function(){lights.destroy();wizard.destroy();cups.destroy();scoreBoard.destroy();exitButton.destroy();distractionLabel.destroy();this.smoke.destroy();this.background.destroy()},quitGame:function(a){this.cleanUp();this.state.start("MainMenu")},scoreBoard_tapped:function(a){},showDistraction:function(){distractionLabel.showLabel()},nextLevel:function(){(function(a){a.smoke.bringToTop();a.smoke.growCloud(function(){a.cleanUp();a.state.start("Level3")})})(this)},shareScene:function(){this.smoke.bringToTop();this.smoke.growCloud();this.cleanUp();this.state.start("Share")}};CupGame.Level3=function(a){this.game;this.add;this.camera;this.cache;this.input;this.load;this.math;this.sound;this.stage;this.time;this.tweens;this.world;this.particles;this.physics;this.rnd;this.desk=null;this.lights=null;this.exitButton=null;this.wizard=null;this.cups=null;this.scoreBoard=null;this.infoLabel=null;this.smoke=null;this.blurX=null;this.blurY=null;this.background=null;this.randomSwap=5;this.hasResizedDistaction=false};CupGame.Level3.prototype={create:function(){this.game.stage.backgroundColor="#FFFFFF";this.background=this.game.add.image(0,0,"default_bg");lights=new CupGame.Lights(this.game);lights.create();wizard=new CupGame.Wizard(this.game);wizard.create();cups=new CupGame.Cups(this.game);cups.create(true);cups.updateSwapSpeed(400);cups.createBall();cups.setWizard(wizard);exitButton=new CupGame.ExitButton(this.game);exitButton.create();scoreBoard=new CupGame.ScoreBoard(this.game);scoreBoard.create();scoreBoard.bloodySign.inputEnabled=true;scoreBoard.bloodySign.events.onInputDown.add(this.scoreBoard_tapped,this);scoreBoard.updateLevel("Level 3");scoreBoard.updateBloodLevel("0","7");distractionLabel=new CupGame.DistractionLabel(this.game);distractionLabel.create();distractionLabel.updateLabel("Distraction!");this.smoke=new CupGame.Cloud(this.game);this.smoke.create(true);this.smoke.sprite.alpha=1;this.smoke.fullScreen();infoImage=new CupGame.InfoImage(this.game);infoImage.create(3);infoImage.sprite.alpha=0;infoImage.fadeIn();var a=3500;(function(b){setTimeout(function(){infoImage.fadeOut();b.smoke.shrinkCloud()},a)})(this);(function(b){setTimeout(function(){wizard.move(function(){cups.startUp()})},a*1.5)})(this);this.randomSwap=randomNumberWithMax(cups.totalSwaps);this.state.states.Share.setLevel(3)},showDistraction:function(){distractionLabel.showLabel()},update:function(){cups.update();if(!wizard.hasBlurred&&cups.totalSwapsIndex===5){wizard.blur(true);(function(a){setTimeout(function(){wizard.blur(false)},3000)})(this)}if(!cups.hasBlurred&&cups.totalSwapsIndex===5){cups.blur(true);(function(a){setTimeout(function(){cups.blur(false)},3000)})(this)}if(!this.hasResizedDistaction&&this.randomSwap===cups.totalSwapsIndex){this.hasResizedDistaction=true;if(randomNumberWithMax(2)==1){cups.scaleItems(true);wizard.scaleItems(true)}else{cups.scaleItems(false);wizard.scaleItems(false)}}if(cups.moveToNextLevel){cups.moveToNextLevel=false;(function(a){setTimeout(function(){a.nextLevel()},500)})(this)}if(cups.moveToShareScene){cups.moveToShareScene=false;(function(a){setTimeout(function(){a.shareScene()},500)})(this)}},cleanUp:function(){lights.destroy();wizard.destroy();cups.destroy();scoreBoard.destroy();exitButton.destroy();distractionLabel.destroy();if(this.blurX){this.blurX.destroy()}if(this.blurY){this.blurY.destroy()}this.smoke.destroy();this.background.destroy()},quitGame:function(a){this.cleanUp();this.state.start("MainMenu")},scoreBoard_tapped:function(a){},showDistraction:function(){distractionLabel.showLabel()},nextLevel:function(){(function(a){a.smoke.bringToTop();a.smoke.growCloud(function(){a.cleanUp();a.state.start("Level4")})})(this)},shareScene:function(){this.smoke.bringToTop();this.smoke.growCloud();this.cleanUp();this.state.start("Share")},blurScene:function(a){if(a){this.blurX=this.game.add.filter("BlurX");this.blurY=this.game.add.filter("BlurY");wizard.body.filter=[this.blurX,this.blurY]}else{}}};CupGame.Level4=function(a){this.game;this.add;this.camera;this.cache;this.input;this.load;this.math;this.sound;this.stage;this.time;this.tweens;this.world;this.particles;this.physics;this.rnd;this.desk=null;this.lights=null;this.exitButton=null;this.wizard=null;this.cups=null;this.scoreBoard=null;this.infoLabel=null;this.smoke=null;this.background=null;this.randomSwap=5;this.hasResizedDistaction=false};CupGame.Level4.prototype={create:function(){this.game.stage.backgroundColor="#FFFFFF";this.background=this.game.add.image(0,0,"default_bg");lights=new CupGame.Lights(this.game);lights.create();wizard=new CupGame.Wizard(this.game);wizard.create();cups=new CupGame.Cups(this.game);cups.create(true);cups.updateSwapSpeed(175);cups.createBall();cups.setWizard(wizard);exitButton=new CupGame.ExitButton(this.game);exitButton.create();scoreBoard=new CupGame.ScoreBoard(this.game);scoreBoard.create();scoreBoard.bloodySign.inputEnabled=true;scoreBoard.bloodySign.events.onInputDown.add(this.scoreBoard_tapped,this);scoreBoard.updateLevel("Level 4");scoreBoard.updateBloodLevel("0","8");distractionLabel=new CupGame.DistractionLabel(this.game);distractionLabel.create();distractionLabel.updateLabel("YOU’RE DRUUUUUNNK!");this.smoke=new CupGame.Cloud(this.game);this.smoke.create(true);this.smoke.sprite.alpha=1;this.smoke.fullScreen();infoImage=new CupGame.InfoImage(this.game);infoImage.create(4);infoImage.sprite.alpha=0;infoImage.fadeIn();var a=3500;(function(b){setTimeout(function(){infoImage.fadeOut();b.smoke.shrinkCloud()},a)})(this);(function(b){setTimeout(function(){wizard.move(function(){cups.startUp()})},a*1.5)})(this);this.state.states.Share.setLevel(4);this.randomSwap=randomNumberWithMax(cups.totalSwaps)},showDistraction:function(){distractionLabel.showLabel()},update:function(){cups.update();if(!lights.hasFlashed&&(cups.totalSwapsIndex===2||cups.totalSwapsIndex===5||cups.totalSwapsIndex===7)){lights.hasFlashed=true;lights.toggleFlashLights()}if(!wizard.hasBlurred&&cups.totalSwapsIndex===5){wizard.blur(true);(function(a){setTimeout(function(){wizard.blur(false)},3000)})(this)}if(!cups.hasBlurred&&cups.totalSwapsIndex===5){cups.blur(true);(function(a){setTimeout(function(){cups.blur(false)},3000)})(this)}if(!this.hasResizedDistaction&&this.randomSwap===cups.totalSwapsIndex){this.hasResizedDistaction=true;if(randomNumberWithMax(2)==1){cups.scaleItems(true);wizard.scaleItems(true)}else{cups.scaleItems(false);wizard.scaleItems(false)}}if(cups.moveToNextLevel){cups.moveToNextLevel=false;(function(a){setTimeout(function(){a.nextLevel()},500)})(this)}if(cups.moveToShareScene){cups.moveToShareScene=false;(function(a){setTimeout(function(){a.shareScene()},500)})(this)}},cleanUp:function(){lights.destroy();wizard.destroy();cups.destroy();scoreBoard.destroy();exitButton.destroy();distractionLabel.destroy();this.smoke.destroy();this.background.destroy()},quitGame:function(a){this.cleanUp();this.state.start("MainMenu")},scoreBoard_tapped:function(a){},showDistraction:function(){distractionLabel.showLabel()},nextLevel:function(){(function(a){a.smoke.bringToTop();a.smoke.growCloud(function(){a.cleanUp();a.state.start("Level5")})})(this)},shareScene:function(){this.smoke.bringToTop();this.smoke.growCloud();this.cleanUp();this.state.start("Share")}};CupGame.Level5=function(a){this.game;this.add;this.camera;this.cache;this.input;this.load;this.math;this.sound;this.stage;this.time;this.tweens;this.world;this.particles;this.physics;this.rnd;this.desk=null;this.lights=null;this.exitButton=null;this.wizard=null;this.cups=null;this.scoreBoard=null;this.infoLabel=null;this.smoke=null;this.background=null;this.randomSwap=5;this.hasResizedDistaction=false};CupGame.Level5.prototype={create:function(){this.game.stage.backgroundColor="#FFFFFF";this.background=this.game.add.image(0,0,"default_bg");lights=new CupGame.Lights(this.game);lights.create();wizard=new CupGame.Wizard(this.game);wizard.create();cups=new CupGame.Cups(this.game);cups.create(true);cups.updateSwapSpeed(250);cups.createBall();cups.setWizard(wizard);exitButton=new CupGame.ExitButton(this.game);exitButton.create();scoreBoard=new CupGame.ScoreBoard(this.game);scoreBoard.create();scoreBoard.bloodySign.inputEnabled=true;scoreBoard.bloodySign.events.onInputDown.add(this.scoreBoard_tapped,this);scoreBoard.updateLevel("Level 5");scoreBoard.updateBloodLevel("1","0");distractionLabel=new CupGame.DistractionLabel(this.game);distractionLabel.create();distractionLabel.updateLabel("WRECKED! WRECKED! WRECKED!");this.smoke=new CupGame.Cloud(this.game);this.smoke.create(true);this.smoke.sprite.alpha=1;this.smoke.fullScreen();infoImage=new CupGame.InfoImage(this.game);infoImage.create(5);infoImage.sprite.alpha=0;infoImage.fadeIn();var a=3500;(function(b){setTimeout(function(){infoImage.fadeOut();b.smoke.shrinkCloud()},a)})(this);(function(b){setTimeout(function(){wizard.move(function(){cups.startUp()})},a*1.5)})(this);this.state.states.Share.setLevel(5);this.randomSwap=randomNumberWithMax(cups.totalSwaps)},showDistraction:function(){distractionLabel.showLabel()},update:function(){cups.update();if(!lights.hasFlashed&&(cups.totalSwapsIndex===2||cups.totalSwapsIndex===5||cups.totalSwapsIndex===7)){lights.hasFlashed=true;lights.toggleFlashLights()}if(!wizard.hasBlurred&&cups.totalSwapsIndex===5){wizard.blur(true);(function(a){setTimeout(function(){wizard.blur(false)},3000)})(this)}if(!cups.hasBlurred&&cups.totalSwapsIndex===5){cups.blur(true);(function(a){setTimeout(function(){cups.blur(false)},3000)})(this)}if(!this.hasResizedDistaction&&this.randomSwap===cups.totalSwapsIndex){this.hasResizedDistaction=true;if(randomNumberWithMax(2)==1){cups.scaleItems(true);wizard.scaleItems(true)}else{cups.scaleItems(false);wizard.scaleItems(false)}}if(cups.moveToNextLevel){cups.moveToNextLevel=false;(function(a){setTimeout(function(){a.nextLevel()},500)})(this)}if(cups.moveToShareScene){cups.moveToShareScene=false;(function(a){setTimeout(function(){a.shareScene()},500)})(this)}},cleanUp:function(){lights.destroy();wizard.destroy();cups.destroy();scoreBoard.destroy();exitButton.destroy();distractionLabel.destroy();this.smoke.destroy();this.background.destroy()},quitGame:function(a){this.cleanUp();this.state.start("MainMenu")},scoreBoard_tapped:function(a){},showDistraction:function(){distractionLabel.showLabel()},nextLevel:function(){(function(a){a.smoke.bringToTop();a.smoke.growCloud(function(){a.cleanUp();a.state.start("Level6")})})(this)},shareScene:function(){this.smoke.bringToTop();this.smoke.growCloud();this.cleanUp();this.state.start("Share")}};CupGame.Level6=function(a){this.game;this.add;this.camera;this.cache;this.input;this.load;this.math;this.sound;this.stage;this.time;this.tweens;this.world;this.particles;this.physics;this.rnd;this.lights=null;this.exitButton=null;this.wizard=null;this.cups=null;this.scoreBoard=null;this.infoLabel=null;this.smoke=null;this.background=null;this.blackout=null;this.randomSwap=5;this.hasResizedDistaction=false;this.levelDisplay=6};CupGame.Level6.prototype={create:function(){this.game.stage.backgroundColor="#FFFFFF";this.background=this.game.add.image(0,0,"default_bg");lights=new CupGame.Lights(this.game);lights.create();wizard=new CupGame.Wizard(this.game);wizard.create();cups=new CupGame.Cups(this.game);cups.create(true);cups.updateSwapSpeed(200-(this.levelDisplay*2));cups.createBall();cups.setWizard(wizard);exitButton=new CupGame.ExitButton(this.game);exitButton.create();scoreBoard=new CupGame.ScoreBoard(this.game);scoreBoard.create();scoreBoard.updateLevel("Level "+this.levelDisplay);switch(this.levelDisplay){case 6:scoreBoard.updateBloodLevel("1","2");break;case 7:scoreBoard.updateBloodLevel("1","4");break;case 8:scoreBoard.updateBloodLevel("1","6");break;case 9:scoreBoard.updateBloodLevel("1","8");break;case 10:scoreBoard.updateBloodLevel("2","0");break}distractionLabel=new CupGame.DistractionLabel(this.game);distractionLabel.create();distractionLabel.updateLabel("YOU’RE A DISGRACE!");this.smoke=new CupGame.Cloud(this.game);this.smoke.create(true);this.smoke.sprite.alpha=1;this.smoke.fullScreen();infoImage=new CupGame.InfoImage(this.game);infoImage.create(this.levelDisplay);infoImage.sprite.alpha=0;infoImage.fadeIn();this.blackout=this.add.sprite(0,0,"preloaderBackground");this.blackout.width=this.game.width;this.blackout.height=this.game.height;this.blackOutShouldBe(false);var a=3500;(function(b){setTimeout(function(){infoImage.fadeOut();b.smoke.shrinkCloud()},a)})(this);(function(b){setTimeout(function(){wizard.move(function(){cups.startUp()})},a*1.5)})(this);this.state.states.Share.setLevel(this.levelDisplay);this.randomSwap=randomNumberWithMax(cups.totalSwaps-2)},blackOutShouldBe:function(c){this.blackout.bringToTop();if(c){var b=500;var a=this.game.add.tween(this.blackout);a.to({alpha:1},b,Phaser.Easing.Quadratic.InOut);a.onComplete.add(function(){cups.setAlpha(0);(function(d){setTimeout(function(){var e=d.game.add.tween(d.blackout);e.to({alpha:0},500,Phaser.Easing.Quadratic.InOut);e.onComplete.add(function(){cups.setAlpha(1)});e.start()},750)})(this)},this);a.start()}else{cups.setAlpha(1);this.blackout.alpha=0}},showDistraction:function(){distractionLabel.showLabel()},update:function(){cups.update();this.blackout.bringToTop();if(cups.totalSwapsIndex===2){this.blackOutShouldBe(true)}else{if(cups.totalSwapsIndex===6){this.blackOutShouldBe(false)}}if(!wizard.hasBlurred&&cups.totalSwapsIndex===1){wizard.blur(true);(function(a){setTimeout(function(){wizard.blur(false)},3000)})(this)}if(!cups.hasBlurred&&cups.totalSwapsIndex===1){cups.blur(true);(function(a){setTimeout(function(){cups.blur(false)},3000)})(this)}if(!this.hasResizedDistaction&&this.randomSwap===cups.totalSwapsIndex){this.hasResizedDistaction=true;if(randomNumberWithMax(2)==1){cups.scaleItems(true);wizard.scaleItems(true)}else{cups.scaleItems(false);wizard.scaleItems(false)}}if(cups.moveToNextLevel){cups.moveToNextLevel=false;(function(a){setTimeout(function(){a.nextLevel()},500)})(this)}if(cups.moveToShareScene){cups.moveToShareScene=false;(function(a){setTimeout(function(){a.shareScene()},500)})(this)}},cleanUp:function(){lights.destroy();wizard.destroy();cups.destroy();scoreBoard.destroy();exitButton.destroy();distractionLabel.destroy();this.smoke.destroy();this.background.destroy()},quitGame:function(a){this.cleanUp();this.state.start("MainMenu")},scoreBoard_tapped:function(a){},showDistraction:function(){distractionLabel.showLabel()},nextLevel:function(){(function(a){a.smoke.bringToTop();a.smoke.growCloud(function(){a.cleanUp();a.state.start("Level6");a.levelDisplay++})})(this)},shareScene:function(){this.smoke.bringToTop();this.smoke.growCloud();this.cleanUp();this.state.start("Share")}};CupGame.Share=function(a){this.playButton=null;this.message_text=null;this.load_text=null;this.desk=null;this.cups=null;this.smoke=null;this.background=null;this.currentLevel=0};CupGame.Share.prototype={create:function(){this.game.stage.backgroundColor="#FFFFFF";this.background=this.game.add.image(0,0,"default_bg");this.cloud=this.game.add.sprite((this.game.width*0.5),(this.game.height/2)-240,"cup_game","cloud.png");this.cloud.anchor.set(0.5);var a=CupGame.Style.defaultText("45px",this.game.width*0.7,"#46a8ef");load_text=this.game.add.text((this.game.width*0.5),(this.game.height*0.2),"You reached level "+this.currentLevel+", Cup Wizard claims another drunk victim!",a);load_text.anchor.set(0.5);desk=new CupGame.Desk(this.game);desk.create();cups=new CupGame.Cups(this.game);cups.create();cups.createBall();playButton=this.game.add.sprite((this.game.width*0.5-130),(this.game.height-85),"cup_game","playAgain.png");playButton.anchor.set(0.5);playButton.inputEnabled=true;playButton.events.onInputDown.add(this.play_button_tapped,this);shareButton=this.game.add.sprite((this.game.width*0.5),((this.game.height*0.5)-85),"cup_game","shareButton.png");shareButton.anchor.set(0.5);shareButton.inputEnabled=true;shareButton.events.onInputDown.add(this.share_button_tapped,this);exitButton=new CupGame.ExitButton(this.game);exitButton.create();this.smoke=new CupGame.Cloud(this.game);this.smoke.create(true);this.smoke.sprite.alpha=1;this.smoke.shrinkCloud()},update:function(){},cleanUp:function(){load_text.destroy();desk.destroy();cups.destroy();playButton.destroy();shareButton.destroy();exitButton.destroy();this.smoke.destroy();this.background.destroy()},startGame:function(a){},share_button_tapped:function(){alert("Share Button Action - we don't have a score?")},play_button_tapped:function(){this.cleanUp();this.state.start("SecondMenu")},setLevel:function(a){this.currentLevel=a}};